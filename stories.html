<!DOCTYPE html>
<html>
<head>
  <title>Submit Your Travel Story</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #e0f7fa; text-align: center; padding: 30px; }
    input, textarea { padding: 10px; margin: 10px; width: 300px; }
    button { padding: 12px 20px; background: #00796b; color: #fff; border: none; }
  </style>
</head>
<body>

<h2>üì∏ Submit Your Travel Story</h2>

<form id="storyForm">
  <input type="text" name="name" placeholder="Your Name" required><br>
  <textarea name="story" placeholder="Your Story" rows="5" required></textarea><br>
  <input type="file" id="imageUpload" accept="image/*" required><br>
  <button type="submit">Submit Story</button>
</form>

<div id="response"></div>

<script>
const form = document.getElementById('storyForm');

form.onsubmit = async function(e) {
  e.preventDefault();
  
  const file = document.getElementById('imageUpload').files[0];
  const data = new FormData();
  data.append('file', file);
  data.append('upload_preset', 'YOUR_UPLOAD_PRESET');  // Replace this with your Cloudinary unsigned upload preset

  // Upload image to Cloudinary
  const cloudinaryRes = await fetch('https://api.cloudinary.com/v1_1/YOUR_CLOUD_NAME/image/upload', {
    method: 'POST',
    body: data
  });
  const imgData = await cloudinaryRes.json();

  // Now, send story details + image URL to your Google Apps Script web app (or Google Form)
  fetch('YOUR_GOOGLE_APPS_SCRIPT_URL', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      name: form.name.value,
      story: form.story.value,
      image: imgData.secure_url
    })
  }).then(() => {
    document.getElementById('response').innerHTML = "‚úÖ Story Submitted Successfully!";
    form.reset();
  }).catch(() => {
    document.getElementById('response').innerHTML = "‚ùå Submission failed.";
  });
}
</script>
<nav>
  <a href="index.html">Home</a>
  <a href="map.html">Map</a>
  <a href="gallery.html">Gallery</a>
  <a href="blog.html">Blog</a>
  <a href="deals.html">Deals</a>
  <a href="about.html">About</a>
  <a href="stories.html">stories</a>
  <a href="contact.html">Contact</a>
</nav>
</body>
</html>
