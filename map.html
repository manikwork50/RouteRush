<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RouteRush - Travel Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="https://unpkg.com/awesomplete/awesomplete.css">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Segoe UI', sans-serif; background:#f5f5f5; }
    nav {
      background: rgba(0,0,0,0.7);
      padding: 15px;
      text-align: center;
      position: fixed;
      top:0;
      width: 100%;
      z-index: 999;
    }
    nav a {
      color: #fff;
      margin: 0 20px;
      text-decoration: none;
      font-weight: bold;
      font-size: 17px;
    }
    nav a:hover { text-decoration: underline; }
    h1 {
      text-align:center;
      margin-top:80px;
      color:#333;
      font-size: 32px;
    }
    .controls {
      text-align:center;
      margin: 20px;
    }
    input, select, button {
      padding: 10px;
      margin: 5px;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      background: #FF5E00;
      color: #fff;
      border: none;
    }
    button:hover { background: #e04d00; cursor: pointer; }
    #map {
      height: 500px;
      margin: 20px;
      border-radius: 8px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    }
    footer {
      background: #007B8F;
      color: #fff;
      padding: 15px;
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<nav>
  <a href="index.html">Home</a>
  <a href="map.html">Map</a>
  <a href="gallery.html">Gallery</a>
  <a href="blog.html">Blog</a>
  <a href="itinerary.html">Itinerary</a>
  <a href="contact.html">Contact</a>
</nav>

<h1>üó∫Ô∏è Plan Your Route</h1>

<div class="controls">
  <input id="fromPlace" class="awesomplete" placeholder="From">
  <input id="toPlace" class="awesomplete" placeholder="To">
  <select id="mode">
    <option value="driving">Car</option>
    <option value="walking">Walk</option>
    <option value="cycling">Cycle</option>
  </select>
  <button onclick="showRoute()">Show Route</button>
  <button onclick="shareRoute()">Share</button>
</div>

<div id="map"></div>

<footer>
  Follow me:
  <a href="https://instagram.com/manik_rao_b" style="color:#fff;">Instagram</a> |
  <a href="https://www.youtube.com/@learnandexplorething" style="color:#fff;">YouTube</a>
  <br>¬© 2025 RouteRush | Travel, Map & Fun
</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/awesomplete/awesomplete.min.js"></script>

<script>
  const map = L.map('map').setView([15.0, 75.0], 6);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap contributors'
  }).addTo(map);

  let routeLayer;
  let startMarker, endMarker;

  function fetchSuggestions(input) {
    input.addEventListener("input", () => {
      if (input.value.length < 3) return;
      fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(input.value)}`)
        .then(res => res.json())
        .then(data => {
          input.awesomplete.list = data.map(item => item.display_name);
        });
    });
  }

  const fromInput = document.getElementById("fromPlace");
  const toInput = document.getElementById("toPlace");
  new Awesomplete(fromInput);
  new Awesomplete(toInput);
  fetchSuggestions(fromInput);
  fetchSuggestions(toInput);

  function showRoute() {
    const from = fromInput.value;
    const to = toInput.value;
    const mode = document.getElementById("mode").value;
    if (!from || !to) { alert("Enter both places"); return; }

    Promise.all([
      fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(from)}`).then(r => r.json()),
      fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(to)}`).then(r => r.json())
    ]).then(([fromData, toData]) => {
      if (!fromData[0] || !toData[0]) { alert("Places not found."); return; }
      const fromCoords = [fromData[0].lat, fromData[0].lon];
      const toCoords = [toData[0].lat, toData[0].lon];

      fetch(`https://router.project-osrm.org/route/v1/${mode}/${fromCoords[1]},${fromCoords[0]};${toCoords[1]},${toCoords[0]}?overview=full&geometries=geojson`)
        .then(r => r.json())
        .then(routeData => {
          if (routeData.code !== 'Ok') { alert("Route not found."); return; }
          const route = routeData.routes[0];
          const distKm = (route.distance / 1000).toFixed(2);
          const timeMin = Math.round(route.duration / 60);
          const hours = Math.floor(timeMin / 60);
          const mins = timeMin % 60;
          let durationStr = "";
          if (hours > 0) durationStr += `${hours} hr `;
          durationStr += `${mins} min`;

          alert(`Distance: ${distKm} km | Duration: ${durationStr}`);

          if (routeLayer) map.removeLayer(routeLayer);
          routeLayer = L.geoJSON(route.geometry, { color: '#007B8F' }).addTo(map);

          if (startMarker) map.removeLayer(startMarker);
          if (endMarker) map.removeLayer(endMarker);
          startMarker = L.marker(fromCoords).addTo(map).bindPopup("Start").openPopup();
          endMarker = L.marker(toCoords).addTo(map).bindPopup("End").openPopup();

          map.fitBounds(L.geoJSON(route.geometry).getBounds());
        });
    });
  }

  function shareRoute() {
    const from = fromInput.value;
    const to = toInput.value;
    if (!from || !to) { alert("Enter both places"); return; }
    const msg = `Check this travel route from ${from} to ${to}!`;
    if (navigator.share) {
      navigator.share({ title: 'RouteRush Travel Route', text: msg, url: location.href });
    } else {
      prompt("Copy to share:", `${msg} ${location.href}`);
    }
  }
</script>

</body>
</html>
